<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FETCH QUEST // Loot Tracker</title>
    <meta name="description"
        content="Track your quest items, objectives, and loot with this retro-futuristic quest tracker">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Orbitron:wght@400;500;700;900&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- Effects layers -->
    <div class="scanlines" aria-hidden="true"></div>
    <div class="noise" aria-hidden="true"></div>
    <canvas id="particles-canvas" aria-hidden="true"></canvas>
    <div id="celebration-overlay" class="celebration-overlay" aria-hidden="true"></div>

    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-brand">
                <div class="logo-container">
                    <svg class="logo-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        aria-hidden="true">
                        <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z" />
                        <polyline points="14 2 14 8 20 8" />
                        <line x1="16" y1="13" x2="8" y2="13" />
                        <line x1="16" y1="17" x2="8" y2="17" />
                        <line x1="10" y1="9" x2="8" y2="9" />
                    </svg>
                </div>
                <div class="title-block">
                    <h1 class="title">FETCH QUEST</h1>
                    <span class="subtitle">// LOOT TRACKER v2.0</span>
                </div>
            </div>
            <div class="header-actions">
                <button id="btn-settings" class="btn btn-secondary" title="Settings">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                        <circle cx="12" cy="12" r="3" />
                        <path
                            d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z" />
                    </svg>
                    <span>SETTINGS</span>
                </button>
                <input type="file" id="file-import" accept=".json" class="hidden" aria-label="Import JSON file">
                <label class="toggle-container" title="Toggle sound effects">
                    <input type="checkbox" id="toggle-sound" title="Toggle sound effects">
                    <span class="toggle-label">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                            <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5" />
                            <path d="M15.54 8.46a5 5 0 0 1 0 7.07" />
                            <path d="M19.07 4.93a10 10 0 0 1 0 14.14" />
                        </svg>
                    </span>
                </label>
            </div>
        </header>

        <!-- Add Quest Form -->
        <form id="add-quest-form" class="add-form">
            <div class="form-header">
                <span class="form-label">+ NEW ACQUISITION TARGET</span>
                <div class="form-type-toggle">
                    <button type="button" class="type-btn active" data-type="item">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10" />
                        </svg>
                        ITEM
                    </button>
                    <button type="button" class="type-btn" data-type="quest">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z" />
                            <polyline points="14 2 14 8 20 8" />
                        </svg>
                        QUEST
                    </button>
                </div>
            </div>
            <div class="form-body">
                <!-- Main info row -->
                <div class="form-row">
                    <div class="form-group form-group-name">
                        <label for="item-name" class="input-label">DESIGNATION</label>
                        <div class="input-with-image">
                            <textarea id="item-name" class="input-field input-autosize" rows="1"
                                placeholder="e.g., Film Reels, or leave blank for image-only..."></textarea>
                            <button type="button" id="btn-add-image" class="btn-image" title="Add image">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
                                    <circle cx="8.5" cy="8.5" r="1.5" />
                                    <polyline points="21 15 16 10 5 21" />
                                </svg>
                            </button>
                            <input type="hidden" id="item-image" value="">
                        </div>
                    </div>
                    <div id="image-preview" class="image-preview hidden"></div>
                    <div class="form-group form-group-category">
                        <label for="item-category" class="input-label">CLASSIFICATION</label>
                        <div class="category-select-wrapper">
                            <select id="item-category" class="input-field input-select">
                                <option value="Misc">Misc</option>
                            </select>
                            <button type="button" id="btn-add-category" class="btn-icon" title="Add new category">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="12" y1="5" x2="12" y2="19" />
                                    <line x1="5" y1="12" x2="19" y2="12" />
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Quest-specific: objectives -->
                <div id="quest-fields" class="form-section hidden">
                    <div class="objectives-header">
                        <span class="input-label">OBJECTIVES</span>
                        <button type="button" id="btn-add-objective" class="btn-link">+ Add Objective</button>
                    </div>
                    <div id="objectives-list" class="objectives-list"></div>
                </div>


                <div class="form-actions">
                    <!-- Item-specific: quantity (inline with submit) -->
                    <div id="item-fields" class="form-group-inline">
                        <label for="item-goal" class="input-label">QTY</label>
                        <input type="number" id="item-goal" class="input-field input-number" min="1" max="9999"
                            value="4">
                    </div>
                    <button type="submit" class="btn btn-primary btn-submit">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                            <circle cx="12" cy="12" r="10" />
                            <line x1="12" y1="8" x2="12" y2="16" />
                            <line x1="8" y1="12" x2="16" y2="12" />
                        </svg>
                        <span>LOG ITEM</span>
                    </button>
                </div>
            </div>
        </form>

        <!-- Quest List -->
        <main id="quest-container" class="quest-container">
            <!-- Empty state -->
            <div id="empty-state" class="empty-state">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" class="empty-icon"
                    aria-hidden="true">
                    <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z" />
                    <polyline points="14 2 14 8 20 8" />
                    <line x1="9" y1="15" x2="15" y2="15" />
                </svg>
                <h3 class="empty-title">NO ACTIVE REQUISITIONS</h3>
                <p class="empty-text">Log an acquisition target above or import existing data.</p>
            </div>
        </main>

        <!-- Status Bar -->
        <footer class="status-bar">
            <div class="status-item">
                <span class="status-label">TARGETS:</span>
                <span id="status-total" class="status-value">0</span>
            </div>
            <div class="status-item">
                <span class="status-label">ACQUIRED:</span>
                <span id="status-complete" class="status-value">0</span>
            </div>
        </footer>
    </div>

    <!-- Archive Panel (Slide-out for completed quests) -->
    <aside id="archive-panel" class="archive-panel">
        <button id="archive-trigger" class="archive-trigger" title="Toggle Archive"
            aria-label="Toggle completed quests archive">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="15 18 9 12 15 6" />
            </svg>
        </button>
        <div class="archive-content">
            <div class="archive-header">
                <h2 class="archive-title">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 8v13H3V8M1 3h22v5H1z" />
                        <path d="M10 12h4" />
                    </svg>
                    ARCHIVE
                </h2>
                <span id="archive-count" class="archive-count">0</span>
            </div>
            <div id="archive-container" class="archive-items">
                <div class="archive-empty">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                        <path d="M9 12l2 2 4-4" />
                        <circle cx="12" cy="12" r="10" />
                    </svg>
                    <p>No completed quests yet</p>
                </div>
            </div>
        </div>
    </aside>

    <!-- Add Category Modal -->
    <div id="modal-category" class="modal hidden">
        <div class="modal-backdrop"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">NEW CLASSIFICATION</h3>
                <button type="button" class="modal-close" aria-label="Close modal">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18" />
                        <line x1="6" y1="6" x2="18" y2="18" />
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <input type="text" id="new-category-name" class="input-field" placeholder="Enter category name...">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary modal-cancel">CANCEL</button>
                <button type="button" class="btn btn-primary" id="btn-save-category">CREATE</button>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="modal-settings" class="modal hidden">
        <div class="modal-backdrop"></div>
        <div class="modal-content modal-content-wide">
            <div class="modal-header">
                <h3 class="modal-title">SETTINGS</h3>
                <button type="button" class="modal-close" aria-label="Close modal">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18" />
                        <line x1="6" y1="6" x2="18" y2="18" />
                    </svg>
                </button>
            </div>
            <div class="modal-body settings-body">
                <!-- Bulk Increment Settings -->
                <div class="settings-section">
                    <h4 class="settings-section-title">BULK INCREMENT</h4>
                    <p class="settings-hint">Hold Shift or Ctrl while clicking +/- to add/subtract in bulk</p>
                    <div class="settings-row">
                        <label for="setting-shift-amount" class="settings-label">
                            <kbd>Shift</kbd> + Click Amount
                        </label>
                        <input type="number" id="setting-shift-amount" class="input-field input-number" min="1"
                            max="1000" value="5">
                    </div>
                    <div class="settings-row">
                        <label for="setting-ctrl-amount" class="settings-label">
                            <kbd>Ctrl</kbd> + Click Amount
                        </label>
                        <input type="number" id="setting-ctrl-amount" class="input-field input-number" min="1"
                            max="1000" value="10">
                    </div>
                </div>

                <!-- Sound Settings -->
                <div class="settings-section">
                    <h4 class="settings-section-title">SOUND</h4>
                    <div class="settings-row">
                        <label for="setting-sound-enabled" class="settings-label">Sound Effects</label>
                        <label class="toggle-switch">
                            <input type="checkbox" id="setting-sound-enabled">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>

                <!-- Archive Settings -->
                <div class="settings-section">
                    <h4 class="settings-section-title">ARCHIVE</h4>
                    <p class="settings-hint">Completed quests can be automatically moved to the archive panel</p>
                    <div class="settings-row">
                        <label for="setting-auto-archive" class="settings-label">Auto-Archive Completed</label>
                        <label class="toggle-switch">
                            <input type="checkbox" id="setting-auto-archive" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>

                <!-- Data Management -->
                <div class="settings-section">
                    <h4 class="settings-section-title">DATA MANAGEMENT</h4>
                    <div class="settings-row settings-row-buttons">
                        <button type="button" id="settings-btn-export" class="btn btn-secondary">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                                <polyline points="7 10 12 15 17 10" />
                                <line x1="12" y1="15" x2="12" y2="3" />
                            </svg>
                            EXPORT DATA
                        </button>
                        <button type="button" id="settings-btn-import" class="btn btn-secondary">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                                <polyline points="17 8 12 3 7 8" />
                                <line x1="12" y1="3" x2="12" y2="15" />
                            </svg>
                            IMPORT DATA
                        </button>
                    </div>
                    <div class="settings-row settings-row-buttons">
                        <button type="button" id="settings-btn-clear" class="btn btn-danger">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="3 6 5 6 21 6" />
                                <path
                                    d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" />
                            </svg>
                            CLEAR ALL DATA
                        </button>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary modal-close">DONE</button>
            </div>
        </div>
    </div>

    <!-- Image Picker Modal -->
    <div id="modal-image" class="modal hidden">
        <div class="modal-backdrop"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">ADD IMAGE</h3>
                <button type="button" class="modal-close" aria-label="Close modal">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18" />
                        <line x1="6" y1="6" x2="18" y2="18" />
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <div class="image-options">
                    <button type="button" id="btn-image-url" class="image-option-btn">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" />
                            <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" />
                        </svg>
                        <span>FROM URL</span>
                    </button>
                    <button type="button" id="btn-image-local" class="image-option-btn">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                            <polyline points="17 8 12 3 7 8" />
                            <line x1="12" y1="3" x2="12" y2="15" />
                        </svg>
                        <span>LOCAL FILE</span>
                    </button>
                </div>
                <div id="image-url-input" class="image-input-section hidden">
                    <input type="url" id="image-url-field" class="input-field"
                        placeholder="https://example.com/image.png">
                </div>
                <input type="file" id="image-file-input" accept="image/*" class="hidden" aria-label="Select image file"
                    title="Select an image file">
                <div id="image-modal-preview" class="image-modal-preview hidden">
                    <img id="image-modal-preview-img" src="" alt="Preview">
                    <button type="button" id="btn-remove-image" class="btn-remove-preview" title="Remove image">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18" />
                            <line x1="6" y1="6" x2="18" y2="18" />
                        </svg>
                    </button>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary modal-cancel">CANCEL</button>
                <button type="button" class="btn btn-primary" id="btn-save-image">APPLY</button>
            </div>
        </div>
    </div>

    <!-- Save Indicator -->
    <div id="save-indicator" class="save-indicator" aria-live="polite">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" />
            <polyline points="22 4 12 14.01 9 11.01" />
        </svg>
        <span>SAVED</span>
    </div>

    <!-- Audio elements - Using Web Audio API via JS is preferred, these are fallbacks -->
    <audio id="sound-tick" preload="auto">
        <source
            src="data:audio/wav;base64,UklGRpYAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YXIAAAAEBggKDA4QEhQWGBocHh4eHh4cGhgWFBIQDgwKCAYEAgD+/Pz8/Pz8/v4AAgQGCAoMDhASFBYYGhweHh4eHhwaGBYUEhAODAoIBgQCAP7+/v7+/v7+AAICBAQGBggICgoMDA4ODg4ODgwMCgoICAYGBAQCAgAA"
            type="audio/wav">
    </audio>
    <audio id="sound-complete" preload="auto">
        <source
            src="data:audio/wav;base64,UklGRqgBAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YYQBAAB4gIiQmKCosLC4uLi4sKigoJiQiIB4cGhgWFBQSEhAQDg4MDAwMDAwODhASEhQUFhgaHB4gIiQmKCosLi4wMDAwMDAuLCooJiQiIBwcGhgWFBISEBAODgwMCgoKCgoKCgwMDhAQEhIUFhgaHBwgIiQmKCosLC4uLi4uLCwqKCgmJCIgHhwcGhoYFhQUEhIQEA4ODAwLCwsLCwwMDA4OEBASEhQWFhgaGhwcHiAiJCYoKiwsLCwsLCwsLCwqKiooKCYmJCQiIiAgHh4cHBwcHBwcHBweHiAgIiIkJCYmKCgqKissLC0tLS0tLS0tLCwsKiopKSkoKCgnp6enp6enp6enp6goKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoJ6enp6enp6enp6enp6enp6enp6cnJycnJycnJycmpqampqampqYmJiYl5eXl5eXlpaWlpaWlpaWlpaWl5eXl5eYmJiYmJk="
            type="audio/wav">
    </audio>
    <audio id="sound-fanfare" preload="auto">
        <source
            src="data:audio/wav;base64,UklGRqoCAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YYYCAABwgJCgoLCwwMDAuLCooJCQgIBweHh4gICIkJigqLC4wMjIyMjAwLiwqKCYkIiAgHh4cHBweHiAgIiQmKCosLjAyMjQ0NDQyMjAuLCooJiQiICAdnZwcHR0eHx+goaIjJCUlpianJ6ennhweICAiJCYoKiwuMDIyNDY2NjY0MzIwLiwqKSckIyIf318eHZ2dnR0dnZ4fH6ChouOkpSWmZudo6OlpaqssLC4wMDIzMzQ0NTU1NTQ0MzIxMC8uLSwoJuXko6KhoR+fnx4dnh4eHx+goaIkJSYmqCkqK6ysrS2ur6+wsLExMTExMTExMC+vLq4tLCspqCYkIiAdnJ0dHR2dnh6fH6ChomMj5KUlpeam52foKGipKaoqqysrq6usLCurrCwsK6urq6urKqopp6WjIB2bnJwcHJ0dHZ4fICEhoqOkJKSmJyeo6aoq66wsbKzs7S0tLSzsrGvra2sq6mopaOenZqYlpSSjoyKhoKAenZ2dHR0dnZ4eHx+goaIi46QkpWYm5yeoaOkpqeop6ioqKiopqampKOhoJ6cmpmXlZSTkY6MioiGhIKAgH58enp4eHh4eHl6ent8fX5/gIGChIWGhoaGhoaEhIOCgYB/foB+fnx8fHt6enp4eHh2dnh4dnZ2dnd4eXp7fH1+f4CAgYKCgoKCgoKBgH9/f35+fn19fHx8fHx8fHx8fX5+fn9/f4CAgICAgICAgIB/f39+fn5+fn5+fn5+fn5+fn9/f39/gIB/f39/f39/f39/f39/f39+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fnx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8"
            type="audio/wav">
    </audio>

    <script src="app.js"></script>
</body>

</html>